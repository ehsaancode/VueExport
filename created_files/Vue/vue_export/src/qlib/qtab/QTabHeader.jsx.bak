import React, { forwardRef } from "react";

const QTabHeader = forwardRef(({
  onClick,
  isActive,
  indicatorColor,
  indicatorHeight,
  children,
  tailwaindClasses = "",
  tabDirection = "Top",
  indicatorType = "",
}, ref) => {
  const getStyle = () => {
    if (!isActive) return {};

    const style = {};

    if (indicatorType === "Capsule" || indicatorType === "capsule") {
      // style.backgroundColor = indicatorColor; // Handled by QTabBar for animation
      style.borderRadius = "9999px";
      style.padding = "4px 12px"; 
      style.zIndex = 10;
      style.position = "relative";
      return style;
    }

    const borderStyle = indicatorType === "Dote" ? "dotted" : "solid";

    switch (tabDirection) {
      case "Top":
        style.borderBottom = `${indicatorHeight} ${borderStyle} ${indicatorColor}`;
        break;
      case "Bottom":
        style.borderTop = `${indicatorHeight} ${borderStyle} ${indicatorColor}`;
        break;
      case "Left":
        if (indicatorType === "line" || indicatorType === "" || indicatorType === "dotted") {
             style.borderRight = `${indicatorHeight} ${borderStyle} ${indicatorColor}`;
        } else {
             style.backgroundColor = indicatorColor;
        }
        break;
      case "Right":
        if (indicatorType === "line" || indicatorType === "" || indicatorType === "dotted") {
             style.borderLeft = `${indicatorHeight} ${borderStyle} ${indicatorColor}`;
        } else {
             style.backgroundColor = indicatorColor;
        }
        break;
      default:
        break;
    }
    
    return style;
  };

  return (
    <div
      ref={ref}
      onClick={onClick}
      className={`cursor-pointer flex items-center justify-center ${tailwaindClasses} ${isActive ? "font-bold" : ""}`}
      style={getStyle()}
    >
      {children}
    </div>
  );
});

QTabHeader.displayName = "QTabHeader";
export default QTabHeader;